{% load static %}
<!doctype html>
<html lang="ru">
  <head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <meta name="theme-color" content="#111111" />
  <title>Результаты</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="{%static "css/vendor.css"%}" />
  <link rel="stylesheet" href="{%static "css/main.css"%}" />
  <style>
    /* Header nav hover: keep visible, slightly lighten */
    .header__nav .header__menu-item { text-decoration: none; }
    .header__nav .header__menu-item span { color:#ffffff; transition: color .2s ease, opacity .2s ease; }
    .header__nav .header__menu-item svg { stroke:#ffffff; fill:none; transition: stroke .2s ease, opacity .2s ease; }
    .header__nav .header__menu-item:hover span,
    .header__nav .header__menu-item:focus span { color:#dbe3ef; opacity:1 !important; }
    .header__nav .header__menu-item:hover svg,
    .header__nav .header__menu-item:focus svg { stroke:#dbe3ef; opacity:1 !important; visibility:visible !important; }
  </style>
</head>

  <body>
    <header class="header">
        <div class="container">
        <div class="header__container" style="display:flex;align-items:center;justify-content:space-between;padding:10px 0;height:70px">
          <div class="header__brand" style="color:#fff;font-weight:800;font-size:22px;">Антиплагиат «БГУИР: Университет»</div>
          <nav class="header__nav" style="display:flex;align-items:center;gap:24px;">
            <a href={% url "documents:cabinet" %} class="header__menu-item" style="display:flex;align-items:center;gap:6px;color:#fff;">
              <svg style="width:20px;height:20px;stroke:#fff;fill:none"><use xlink:href="{%static "assets/img/sprite.svg"%}#menu-cab"></use></svg>
              <span>Репозиторий</span>
            </a>
            <a href={% url "users:pers-cab" %} class="header__menu-item" style="display:flex;align-items:center;gap:6px;color:#fff;">
              <svg style="width:20px;height:20px;stroke:#fff;fill:none"><use xlink:href="{%static "assets/img/sprite.svg"%}#menu-user"></use></svg>
              <span>Личный кабинет</span>
            </a>
            <button class="cab__btn btn btn-def" type="button" data-graph-path="modal-load" style="width:auto;padding:8px 14px;display:flex;align-items:center;gap:8px;background:#fff;color:#3b547f;">
              <svg style="width:24px;height:24px;fill:currentColor;display:block">
                <use xlink:href="{%static "assets/img/sprite.svg"%}#paper"></use>
              </svg>
              Проверить документ
            </button>
          </nav>
        </div>
      </div>
</header>
 <main>
  <section class="cab cab--results">
    <div class="container">
      <div class="cab__container">
        <div class="cab__titles">
          <h1 class="cab__titles-title title">Результаты</h1>
          <div class="cab__titles-left" style="display:flex;justify-content:flex-end;gap:16px;">
            <div class="cab__search">
              <form action="{% url 'documents:results' %}" method="GET" id="search-form" class="cab__search-form search">
                <div class="search__container">
                    <input name="q" autocomplete="off" type="text" class="search__input" 
                           value="{{ query|default:'' }}" placeholder="Поиск по ФИО" />
            
                    <button type="submit" form="search-form" class="search__btn-submit">
                        <svg>
                            <use xlink:href="{% static 'assets/img/sprite.svg' %}#search"></use>
                        </svg>
                    </button>
            
                    {% if is_searching %}
                    <a href="{% url 'documents:results' %}" class="search__btn-reset">
                        <svg class="icon">
                            <use xlink:href="{% static 'assets/img/sprite.svg' %}#reset"></use>
                        </svg>
                    </a>
                    {% endif %}
                </div>
              </form>            
            </div>
          </div>
        </div>
        <div class="cab__block">
          <div class="cab__header">
            <div class="cab__header-item">
              <div class="cab__header-name">№</div>
              <button type="button" class="cab__header-btn">
                <svg>
                  <use xlink:href"{%static "assets/img/sprite.svg"%}#table-btn"></use>
                </svg>
              </button>
            </div>
            <div class="cab__header-item">
              <div class="cab__header-name">ФИО</div>
              <button type="button" class="cab__header-btn">
                <svg>
                  <use xlink:href"{%static "assets/img/sprite.svg"%}#table-btn"></use>
                </svg>
              </button>
            </div>
            <div class="cab__header-item">
              <div class="cab__header-name">Дата</div>
              <button type="button" class="cab__header-btn">
                <svg>
                  <use xlink:href"{%static "assets/img/sprite.svg"%}#table-btn"></use>
                </svg>
              </button>
            </div>
            <div class="cab__header-item">
              <div class="cab__header-name">Оригинальность</div>
              <button type="button" class="cab__header-btn">
                <svg>
                  <use xlink:href"{%static "assets/img/sprite.svg"%}#table-btn"></use>
                </svg>
              </button>
            </div>
            <div class="cab__header-item">
              <div class="cab__header-name">Название</div>
            </div>
            <div class="cab__header-item">
              <div class="cab__header-name">Статус</div>
            </div>
          </div>
          <div class="cab__content cab-results">
            <div class="cab-results__content">

              {% if documents|length == 0 %}
                <div class="cab__content-none" style="display: block " text-align = "center;">Документы отсутствуют</div>
              {% else %}
                <div class="cab-results__blocks">

                {% for document in documents%}
                <div class="cab-results__block">
                  <a href="{% url "documents:change_statusb" document.id %}" class='js-doc-url-1' style="display: none;"> </a>
                  <a href="{% url "documents:change_statusa" document.id %}" class='js-doc-url-2' style="display: none;"> </a>
                  <div class='cab-results__block-item'>
                    <div>№</div>
                    <div>{{ forloop.counter }}</div>
                  </div>
                  <div class='cab-results__block-item'>
                    <div>ФИО</div>
                    <div class='js-modal-doc-name'>{{document.user.last_name}} {{document.user.first_name}} {{document.user.sur_name}}</div>
                  </div>
                  <div class='cab-results__block-item'>
                    <div>Дата</div>
                    <div>{{document.time_created|date:"d.m.Y H:i"}}</div>
                  </div>
                  <div class='cab-results__block-item'>
                    <div>Оригинальность</div>
                    <div class='js-modal-doc-orig'>{{document.result|floatformat:2}}</div>
                  </div>
                  <div class='cab-results__block-item'>
                    <div>Название</div>
                    <div class='js-modal-doc-file js-notify-tippy'>{{document.name}}
                    </div>
                  </div>
                  <div class='cab-results__block-item'>
                    <div>Статус</div>
                    <div class='cab-results__result'>
                      <p>—</p>
                      <svg class='success-icon'>
                        <use xlink:href"{%static "assets/img/sprite.svg"%}#result-success"></use>
                      </svg>
                      <svg class='no-success-icon'>
                        <use xlink:href"{%static "assets/img/sprite.svg"%}#result-error"></use>
                      </svg>
                    </div>
                  </div>
                  <div class='cab-results__more more-btns'>
                    <button type='button' class='more-btns__btn'>
                      <svg>
                        <use xlink:href="{%static "assets/img/sprite.svg"%}#more"></use>
                      </svg>
                    </button>
                    <div class="more-btns__content">
                      <button type='button' class='more-btns__link'>
                        <div class="more-btns__link-icon">
                          <svg>
                            <use xlink:href"{%static "assets/img/sprite.svg"%}#results-result"></use>
                          </svg>
                          <svg>
                            <use xlink:href"{%static "assets/img/sprite.svg"%}#results-result-active"></use>
                          </svg>
                        </div>
                        <span><a href="{% url 'documents:download_file' document.id %}" class="btn btn-primary js-doc-id">Результаты</a></span>
                      </button>
                      <button type='button' class='more-btns__link' data-graph-path="modal-doc">
                        <div class="more-btns__link-icon">
                          <svg>
                            <use xlink:href"{%static "assets/img/sprite.svg"%}#results-star"></use>
                          </svg>
                          <svg>
                            <use xlink:href"{%static "assets/img/sprite.svg"%}#results-star-active"></use>
                          </svg>
                        </div>
                        <span>Оценить</span>
                      </button>
                    </div>
                  </div>
                </div>
                {% endfor %}
              </div>
              {% endif %}
            </div>
          </div>
          <div class="cab__desc">
            <div class="cab__desc-content">
              <div class="cab__desc-infos">
                <div class="cab__desc-pagination pagination">
                    {% if documents.has_previous %}
                    <a href="?page={{ documents.previous_page_number }}{% if query %}&q={{ query }}{% endif %}" class="pagination__btn">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                d="M12 2.75024C6.892 2.75024 2.75 6.89124 2.75 12.0002C2.75 17.1082 6.892 21.2502 12 21.2502C17.108 21.2502 21.25 17.1082 21.25 12.0002C21.25 6.89124 17.108 2.75024 12 2.75024Z"
                                stroke="#696F79"
                                stroke-width="1.5"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                            />
                            <path
                                d="M13.4424 8.52905L9.95638 12.0001L13.4424 15.4711"
                                stroke="#696F79"
                                stroke-width="1.5"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                            />
                        </svg>
                    </a>
                    {% endif %}
                    
                    <div class="pagination__info">{{ documents.start_index }}-{{ documents.end_index }} из {{ documents.paginator.count }}</div>
                    
                    {% if documents.has_next %}
                    <a href="?page={{ documents.next_page_number }}{% if query %}&q={{ query }}{% endif %}" class="pagination__btn">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                d="M12 21.2498C17.108 21.2498 21.25 17.1088 21.25 11.9998C21.25 6.89179 17.108 2.74979 12 2.74979C6.892 2.74979 2.75 6.89179 2.75 11.9998C2.75 17.1088 6.892 21.2498 12 21.2498Z"
                                stroke="#696F79"
                                stroke-width="1.5"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                            />
                            <path
                                d="M10.5576 15.471L14.0436 12L10.5576 8.52898"
                                stroke="#696F79"
                                stroke-width="1.5"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                            />
                        </svg>
                    </a>
                    {% endif %}
                  </div>
                </div>            
              </div>
            </div>
          </div> 
        </div>
      </div>
    </div>
  </section>
  <button type="button" class="btn-up js-btn-up">
  <svg>
    <use xlink:href"{%static "assets/img/sprite.svg"%}#header-btn"></use>
  </svg>
</button>

<style>
  /* Сузить панель пагинации (если есть локальная пагинация в результатах) */
  .cab__desc .pagination { 
    max-width: 520px; 
    margin: 0 auto; 
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
  }
  .cab__desc-pagination.pagination { 
    height: 30px; 
    min-height: 30px; 
    align-items: center; 
    justify-content: center;
    display: flex;
    gap: 10px;
  }
  .pagination__info {
    margin: 0;
    font-size: 15px;
    line-height: 1.2;
    font-weight: 500;
  }
  .pagination__btn {
    display: flex;
    align-items: center;
    justify-content: center;
  }
  /* Футер 40px */
  .footer { height: 40px !important; min-height: 40px !important; padding: 0 !important; margin: 0 !important; }

  /* Показать стрелку у поля выбора типа работы (в модалке загрузки) */
  .dropdown__header{position:relative}
  .dropdown__btn{position:absolute;right:12px;top:50%;transform:translateY(-50%);display:block}
  .dropdown__btn svg{fill:#696f79}
  .dropdown__header:hover .dropdown__btn svg{fill:#3b547f}
</style>
</main>
    <footer class="footer"></footer>
 <div class="graph-modal">
  <div class="graph-modal__container modal-doc" role="dialog" aria-modal="true" data-graph-target="modal-doc">
    <button class="btn-reset js-modal-close graph-modal__close" aria-label="Закрыть модальное окно">
      <svg>
        <use xlink:href="{%static "assets/img/sprite.svg"%}#modal-close"></use>
      </svg>
    </button>
    <div class="modal-doc__container">
      <h2 class="modal-doc__title">Оценить документ</h2>
      <p class="modal-doc__subtitle">Вы уверены, что готовы вынести окончательное решение о данном документе?</p>
      <div class="modal-doc__items">
        <div class="modal-doc__item">
          <div>ФИО</div>
          <div class="js-modal-doc-name"></div>
        </div>
        <div class="modal-doc__item">
          <div>Оригинальность</div>
          <div class="js-modal-doc-orig"></div>
        </div>
        <div class="modal-doc__item">
          <div>Название</div>
          <div class="js-modal-doc-file"></div>
        </div>
      </div>
      <div class="modal-doc__btns">
        <a href="" class="modal-doc__btn btn-sec js-modal-close js-result-no-success js-modal-doc-url-1">
          Отправить на доработку
          </a>
        <a href="" class="modal-doc__btn btn-def js-modal-close js-result-success js-modal-doc-url-2">
          Зачтен
        </a>
      </div>
    </div>
  </div>
  <div class="graph-modal__container modal-load" role="dialog" aria-modal="true" data-graph-target="modal-load">
    <button class="btn-reset js-modal-close graph-modal__close" aria-label="Закрыть модальное окно">
      <svg>
        <use xlink:href="{%static "assets/img/sprite.svg"%}#modal-close"></use>
      </svg>
    </button>
    <div class="modal-load__container">
      <h2 class="modal-load__title">Загрузка документа</h2>
      <form method="post" enctype="multipart/form-data" class="modal-load__form" id="modal-doc-form" action="{% url 'documents:cabinet' %}">
        {% csrf_token %}
        <div class="modal-load__input input">
          <label class="input__label" for="name">Название работы <span>*</span></label>
          <input autocomplete="off" class="input__input" type="text" placeholder="Название работы" name="name" />
          <div class="input__btn-notify js-notify" data-notify="Менее 8 символов">
            <svg>
              <use xlink:href"{%static "assets/img/sprite.svg"%}#input-error"></use>
            </svg>
          </div>
          <div class="input__error">Некорректное название работы!</div>
        </div>
        <div class="modal-load__dropdown dropdown js-dropdown">
          <div class="dropdown__headline">Тип работы <span>*</span></div>
          <div class="dropdown__header js-dropdown-inner">
            <div class="dropdown__value js-dropdown-value">Тип работы</div>
            <button type="button" class="dropdown__btn">
              <svg>
                <use xlink:href="{%static "assets/img/sprite.svg"%}#dropdown-arrow"></use>
              </svg>
            </button>
          </div>
          <div class="dropdown__content">
            <div class="dropdown__items" data-simplebar>
              <div class="dropdown__item js-dropdown-item">
                <input id="item-1" type="radio" name="item" value="item-1" />
                <label for="item-1">Item-1</label>
              </div>
              <div class="dropdown__item js-dropdown-item">
                <input id="item-2" type="radio" name="item" value="item-2" />
                <label for="item-2">Item-2</label>
              </div>
              <div class="dropdown__item js-dropdown-item">
                <input id="item-3" type="radio" name="item" value="item-3" />
                <label for="item-3">Item-3</label>
              </div>
              <div class="dropdown__item js-dropdown-item">
                <input id="item-4" type="radio" name="item" value="item-4" />
                <label for="item-4">Item-4</label>
              </div>
              <div class="dropdown__item js-dropdown-item">
                <input id="item-5" type="radio" name="item" value="item-5" />
                <label for="item-5">Item-5</label>
              </div>
              <div class="dropdown__item js-dropdown-item">
                <input id="item-6" type="radio" name="item" value="item-6" />
                <label for="item-6">Item-6</label>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-load__drag-area drag-area">
          <div class="drag-area__form">
            <button class="drag-area__btn btn btn-def" type="button">
              <svg>
                <use xlink:href"{%static "assets/img/sprite.svg"%}#paper"></use>
              </svg>
              Загрузить документ
            </button>
            <p class="drag-area__up">ИЛИ ПЕРЕТАЩИТЕ ФАЙЛЫ СЮДА</p>
            <p class="drag-area__sm">
              Допустимые форматы: PDF, DOCX <br />
              Максимальный размер: 50 МБ
            </p>
            <input type="file" hidden name="data" accept="application/pdf,application/vnd.openxmlformats-officedocument.wordprocessingml.document" />
          </div>
          <div class="drag-area__files"></div>
        </div>
        <input name="status" value="2" id="id_status" type="hidden">
        <button class="modal-load__btn btn btn-def" type="submit" form="modal-doc-form">Проверить</button>
      </form>
    </div>
  </div>
  <div
    class="graph-modal__container modal-doc modal-protection"
    role="dialog"
    aria-modal="true"
    data-graph-target="modal-protection"
  >
    <button class="btn-reset js-modal-close graph-modal__close" aria-label="Закрыть модальное окно">
      <svg>
        <use xlink:href"{%static "assets/img/sprite.svg"%}#modal-close"></use>
      </svg>
    </button>
    <div class="modal-doc__container">
      <h2 class="modal-doc__title">Отправить документ на защиту</h2>
      <p class="modal-doc__subtitle">Вы уверены, что готовы отправить документ на защиту необратима?</p>
      <div class="modal-doc__items">
        <div class="modal-doc__item">
          <div>Оригинальность</div>
          <div class="js-modal-doc-orig"></div>
        </div>
        <div class="modal-doc__item">
          <div>Название</div>
          <div class="js-modal-doc-file"></div>
        </div>
      </div>
      <div class="modal-doc__btns">
        <button type="button" class="modal-doc__btn btn-def js-modal-close">
          <span>Отправить</span>
        </button>
      </div>
    </div>
  </div>
</div>

    <script src="https://unpkg.com/@popperjs/core@2"></script>
<script src="https://unpkg.com/tippy.js@6"></script>
<script src="{%static "js/main.js"%}"></script>

  </body>
</html>